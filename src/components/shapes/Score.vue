<template>
  <g :transform="transform">
    <text class="score text" dy="-24">score</text>
    <text class="score number">{{score}}</text>
    <g v-for="star in stars" :key="star.id" :transform="star.transform">
      <path :d="icon" :fill="star.fill" />
    </g>
  </g>
</template>

<script>
export default {
  name: "Score",
  props: {
    score: {
      type: Number,
      default: 0
    },
    maxScore: {
      type: Number,
      default: 0
    },
    x: {
      type: Number,
      default: 400
    },
    y: {
      type: Number,
      default: 300
    }
  },
  data() {
    return {
      icon:
        "m 2.5071808,5.0833915 c -0.048835,0.050732 -0.068369,0.1116114 -0.058602,0.1826368 L 2.7513569,7.1228359 C 2.8001919,7.4069377 2.6927549,7.6808929 2.4681129,7.8533832 2.243471,8.0258735 1.9602269,8.0461665 1.716051,7.9142622 L 0.10448986,7.0315175 c -0.05860222,-0.030439 -0.12697149,-0.030439 -0.18557371,0 L -1.692645,7.9142622 C -1.9368209,8.0461665 -2.220065,8.0258735 -2.4447068,7.8533832 -2.6693486,7.6808929 -2.7767861,7.4069377 -2.7279509,7.1228359 l 0.3027781,-1.8568076 c 0.00977,-0.060879 -0.00977,-0.1319044 -0.058602,-0.1826368 L -3.7827907,3.7643478 C -3.9781314,3.561418 -4.0465007,3.2773163 -3.9683644,3.003361 -3.8804614,2.7294058 -3.6655862,2.5366225 -3.3921092,2.4960365 l 1.7971348,-0.2739552 c 0.068369,-0.010147 0.1172044,-0.050733 0.1465055,-0.1116114 L -0.6475718,0.41600609 C -0.52060032,0.15219735 -0.28619143,0 -0.00294735,0 0.28029673,0 0.51470562,0.15219735 0.6416771,0.41600609 v 0 L 1.4425742,2.1104699 c 0.029301,0.060879 0.078136,0.1014649 0.1465055,0.1116114 l 1.7971348,0.2739552 c 0.2734771,0.040586 0.4883519,0.2333693 0.5762552,0.5073245 0.087903,0.2739553 0.019534,0.558057 -0.1855737,0.7609868 z"
    };
  },
  computed: {
    transform() {
      return `translate(${this.x}, ${this.y})`;
    },
    stars() {
      let stars = [];
      let fill = "#ffffff";
      for (let i = 0; i < 3; i++) {
        if (this.score / this.maxScore < 0.5 + i * 0.2) {
          fill = "#000000";
        }
        stars.push({ id: i, fill, transform: `translate(${i * 16 - 16}, 10)` });
      }
      return stars;
    }
  }
};
</script>

<style>
.score {
  fill: #ffffff;
  text-anchor: middle;
}
.text {
  font-size: 16px;
}
.number {
  font-size: 24px;
}
</style>